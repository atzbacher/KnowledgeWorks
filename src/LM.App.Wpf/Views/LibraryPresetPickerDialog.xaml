<Window x:Class="LM.App.Wpf.Views.LibraryPresetPickerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:common="clr-namespace:LM.App.Wpf.Common"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        Title="{Binding Title}"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterOwner"
        MinWidth="420"
        MinHeight="320"
        FocusManager.FocusedElement="{Binding ElementName=PresetList}">
  <Grid Margin="16">
    <Grid.Resources>
      <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </Grid.Resources>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="8" />
      <RowDefinition Height="*" />
      <RowDefinition Height="12" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <TextBlock Grid.Row="0"
               FontWeight="SemiBold"
               Text="{Binding Title}" />

    <Border Grid.Row="2"
            BorderBrush="#33000000"
            BorderThickness="1"
            CornerRadius="4">
      <ListBox x:Name="PresetList"
               MinWidth="360"
               HorizontalContentAlignment="Stretch"
               ItemsSource="{Binding Presets}"
               SelectedItem="{Binding SelectedPreset}">
        <ListBox.ItemTemplate>
          <DataTemplate DataType="{x:Type common:LibraryPresetSummary}">
            <StackPanel Orientation="Vertical" Margin="4">
              <TextBlock Text="{Binding Name}" FontWeight="SemiBold" />
              <TextBlock Text="{Binding SavedUtc, StringFormat='Saved {0:yyyy-MM-dd HH:mm}'}" FontSize="12" Opacity="0.7" />
            </StackPanel>
          </DataTemplate>
        </ListBox.ItemTemplate>
      </ListBox>
    </Border>

    <StackPanel Grid.Row="4"
                Style="{StaticResource DialogButtonPanelStyle}">
      <Button Content="Delete"
              Style="{StaticResource DialogButtonStyle}"
              Command="{Binding DeleteCommand}" />
      <Button Content="Load"
              Style="{StaticResource DialogButtonStyle}"
              Command="{Binding LoadCommand}"
              Visibility="{Binding AllowLoad, Converter={StaticResource BoolToVisibilityConverter}}" />
      <Button Content="Close"
              Style="{StaticResource DialogCancelButtonStyle}"
              Command="{Binding CloseCommand}" />
    </StackPanel>
  </Grid>
</Window>
