<Window x:Class="LM.App.Wpf.Views.Library.AttachmentMetadataDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:ClassModifier="internal"
        Title="{Binding Title}"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        MinWidth="520"
        MinHeight="360">
  <Grid Margin="20">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="8" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="12" />
      <RowDefinition Height="*" />
      <RowDefinition Height="16" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <TextBlock Text="Provide details for each attachment before saving." />

    <Border Grid.Row="2"
            Padding="8"
            Background="#FFF6F6F6"
            BorderBrush="#FFE0E0E0"
            BorderThickness="1">
      <StackPanel Orientation="Horizontal">
        <TextBlock Text="Entry:" FontWeight="SemiBold" />
        <TextBlock Text=" " />
        <TextBlock Text="{Binding EntryTitle}" />
      </StackPanel>
    </Border>

    <ScrollViewer Grid.Row="4"
                  VerticalScrollBarVisibility="Auto"
                  MaxHeight="420">
      <ItemsControl ItemsSource="{Binding Items}">
        <ItemsControl.ItemTemplate>
          <DataTemplate>
            <Border BorderBrush="#FFE0E0E0"
                    BorderThickness="1"
                    Padding="12"
                    Margin="0,0,0,12">
              <StackPanel>
                <TextBlock Text="{Binding DisplayName}" FontWeight="SemiBold" />
                <Grid Margin="0,8,0,0">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="12" />
                    <ColumnDefinition Width="*" />
                  </Grid.ColumnDefinitions>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="8" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="8" />
                    <RowDefinition Height="Auto" />
                  </Grid.RowDefinitions>

                  <TextBlock Grid.Row="0"
                             Grid.Column="0"
                             VerticalAlignment="Center"
                             Text="Title:" />
                  <TextBox Grid.Row="0"
                           Grid.Column="2"
                           Text="{Binding Title, UpdateSourceTrigger=PropertyChanged}"
                           MinWidth="240" />

                  <TextBlock Grid.Row="2"
                             Grid.Column="0"
                             VerticalAlignment="Center"
                             Text="Type:" />
                  <ComboBox Grid.Row="2"
                            Grid.Column="2"
                            ItemsSource="{Binding DataContext.KindOptions, RelativeSource={RelativeSource AncestorType=Window}}"
                            SelectedItem="{Binding Kind}" />

                  <TextBlock Grid.Row="4"
                             Grid.Column="0"
                             VerticalAlignment="Center"
                             Text="Tags:" />
                  <TextBox Grid.Row="4"
                           Grid.Column="2"
                           Text="{Binding Tags, UpdateSourceTrigger=PropertyChanged}"
                           ToolTip="Comma or semicolon separated tags." />
                </Grid>
              </StackPanel>
            </Border>
          </DataTemplate>
        </ItemsControl.ItemTemplate>
      </ItemsControl>
    </ScrollViewer>

    <StackPanel Grid.Row="6"
                Orientation="Horizontal"
                HorizontalAlignment="Right"
                Style="{StaticResource DialogButtonPanelStyle}">
      <Button Content="Cancel"
              Style="{StaticResource DialogCancelButtonStyle}"
              Command="{Binding CancelCommand}" />
      <Button Content="Attach"
              Style="{StaticResource DialogPrimaryButtonStyle}"
              Command="{Binding SaveCommand}" />
    </StackPanel>
  </Grid>
</Window>
