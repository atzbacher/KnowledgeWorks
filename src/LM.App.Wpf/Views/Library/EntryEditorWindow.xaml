<Window x:Class="LM.App.Wpf.Views.EntryEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:core="clr-namespace:LM.Core.Models;assembly=LM.Core"
        x:ClassModifier="internal"
        mc:Ignorable="d"
        Title="Edit entry"
        Height="520"
        Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">
  <Window.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/LM.App.Wpf;component/Views/Templates/StagingEditorTemplates.xaml" />
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </Window.Resources>

  <Grid Margin="12">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <StackPanel Grid.Row="0"
                Orientation="Horizontal"
                VerticalAlignment="Center">
      <TextBlock Text="Edit entry metadata" FontWeight="Bold" />
      <TextBlock Text="Type:"
                 Margin="24,0,6,0"
                 VerticalAlignment="Center" />
      <ComboBox ItemsSource="{Binding EntryTypes}"
                SelectedItem="{Binding Item.Type, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                Width="160" />
      <TextBlock Text="{Binding Item.OriginalFileName, StringFormat='File: {0}'}"
                 Margin="24,0,0,0"
                 VerticalAlignment="Center">
        <TextBlock.Style>
          <Style TargetType="TextBlock">
            <Setter Property="Visibility" Value="Visible" />
            <Style.Triggers>
              <DataTrigger Binding="{Binding Item.OriginalFileName}" Value="{x:Null}">
                <Setter Property="Visibility" Value="Collapsed" />
              </DataTrigger>
              <DataTrigger Binding="{Binding Item.OriginalFileName}" Value="">
                <Setter Property="Visibility" Value="Collapsed" />
              </DataTrigger>
            </Style.Triggers>
          </Style>
        </TextBlock.Style>
      </TextBlock>
    </StackPanel>

    <Border Grid.Row="1">
      <ContentControl Content="{Binding Item}">
        <ContentControl.Style>
          <Style TargetType="ContentControl">
            <Setter Property="ContentTemplate" Value="{StaticResource DocumentTemplate}" />
            <Style.Triggers>
              <DataTrigger Binding="{Binding Item.Type}" Value="{x:Static core:EntryType.Publication}">
                <Setter Property="ContentTemplate" Value="{StaticResource PublicationTemplate}" />
              </DataTrigger>
            </Style.Triggers>
          </Style>
        </ContentControl.Style>
      </ContentControl>
    </Border>

    <StackPanel Grid.Row="2"
                Orientation="Horizontal"
                HorizontalAlignment="Right"
                Margin="0,12,0,0">
      <Button Content="Save"
              Command="{Binding SaveCommand}"
              Margin="0,0,8,0"
              IsDefault="True" />
      <Button Content="Cancel"
              Command="{Binding CancelCommand}"
              IsCancel="True" />
    </StackPanel>
  </Grid>
</Window>
